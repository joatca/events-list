# in the finders below, `main` finds the document section containing the list of events, `events` finds the list
# of events, and in each event, `link` finds the URL to the web page, `title` finds the title text, `date` finds
# just the datetext, `time` just the time text, `datetime` finds both if they are smashed together`
#
# In each finder, `css` searches by CSS selector and `attr` fetches the element's attribute,
# and the optional `methods` is a Nokogiri method to call on the returning value, either a string or array
#
output_file: ../events-list-site/content/_index.md
abbrev_file: ../events-list-site/content/about/_index.md
sources:
  - name: Centennial Hall
    abbrev: Cent
    home: https://centennialhall.london.ca/london-event-listings.html
    note: "Not supported: too difficult to scan website automatically"
  - name: 100 Kellogg Lane
    abbrev: 100K
    home: https://100kellogglane.com/
    note: "Not supported: no events listing"
  - name: Covent Garden Market
    abbrev: CGM
    tags:
      - Municipal
      - Downtown
    url: https://coventmarket.com/events/
    debug_url: "cgm.html"
    home: https://coventmarket.com/
    finders:
      main:
        css: "section.tile-callout-cards"
      events:
        css: "div.grid-item a"
      link:
        attr: "href"
        methods: "value"
      title:
        css: "h3.event-title"
        methods: "text"
      date:
        css: "div.event-date-time strong"
        methods: "text"
        # removes the trailing end date
        remove: "-.*$"
      time:
        css: "div.event-date-time div"
        methods: "text"
        # removes the trailed end time
        remove: "-.*$"
  - name: Aeolian Hall
    abbrev: Aeol
    tags:
      - Downtown
      - Culture
    url: https://aeolianhall.ca/events/
    debug_url: "ah.html"
    home: https://aeolianhall.ca/
    finders:
      main:
        css: "section.events-feed"
      events:
        css: "div.event-tile"
      link:
        css: "a.link-wrap"
        attr: "href"
        methods: "value"
      title:
        css: "div.event-title"
        methods: "text"
        # strips leading and trailing whitespace
        remove:
          - "^\\s+"
          - "\\s+$"
      date:
        css: "span.event-date"
        methods: "text"
        # removes the leading day of the week
        remove: "^\\S+ "
      time:
        css: "span.event-time"
        methods: "text"
  - name: Museum London
    abbrev: Museum
    tags:
      - Downtown
      - Culture
    url: https://museumlondon.ca/programs-events
    debug_url: ml.html
    home: https://museumlondon.ca/
    finders:
      main:
        css: div.event
      events:
        css: div.col-xs-9
      link:
        css: a.num
        attr: href
        methods: value
      title:
        css: a.num h3
        methods: text
      datetime:
        css: span.event-date
        methods: text
        # remove leading day of the week
        remove: "^\\S+ "
  - name: London Music Hall
    abbrev: LMH
    tags:
      - Downtown
      - Culture
    url: http://londonmusichall.com/upcoming-events/
    debug_url: lmh.html
    home: http://londonmusichall.com/
    finders:
      main:
        css: div.events
      events:
        css: div.event
      link:
        css: div.event-info h2 a
        attr: href
        methods: value
      title:
        css: div.event-info h2 a
        methods: text
      date:
        css: div.event-info div.date
        methods: text
      time:
        css: div.event-info div.times
        methods: text
        # remove extraneous crap
        remove:
          - "Doors:"
          - "/\\s*Show:.*$"
  - name: Budweiser Gardens
    abbrev: BudG
    tags:
      - Downtown
    url: https://www.budweisergardens.com/events
    debug_url: bg.html
    home: https://www.budweisergardens.com/
    finders:
      main:
        css: div.m-eventList
      events:
        css: div.m-eventItem
      link:
        css: h3.m-eventItem__title a
        attr: href
        methods: value
      title:
        css: h3.m-eventItem__title a
        methods: text
      date:
        css: div.m-eventItem__date
        methods: text
        # remove last word (day of week)
        remove: "\\S+\\s*$"
  - name: Wolf Performance Hall
    abbrev: Wolf
    tags:
      - Downtown
      - Culture
    url: https://www.lpl.ca/services-spaces/featured-spaces/wolf-performance-hall
    debug_url: wph.html
    home: https://www.lpl.ca/services-spaces/featured-spaces/wolf-performance-hall
    finders:
      main:
        css: div.views-view-grid
      events:
        css: a.teaser-card--event
      link:
        attr: href
        methods: value
      title:
        attr: title
        methods: value
      date:
        css: div.teaser-card__event-date div
        methods:
          - first
          - text
      time:
        css: div.teaser-card__event-date div
        methods:
          - pop
          - text
        # remove end time
        remove: "- \\s*.*"
  - name: Don Wright Faculty of Music
    abbrev: FMus
    tags:
      - Culture
    url: http://www.events.westernu.ca/events/music/
    debug_url: dwfm.html
    home: http://www.events.westernu.ca/events/music/
    finders:
      main:
        css: "div#mainCol"
      date_containers:
        css: div.day
      date:
        css: h2
        methods: text
        # remove leading day of week
        remove: "^\\S+\\s+"
      events:
        css: div.detailColFull
      link:
        css: div.detailColRight a
        attr: href
        methods: value
      title:
        css: div.detailColRight a
        methods: text
      time:
        css: div.detailColLeft
        methods: text
  - name: Grand Theatre
    abbrev: Grand
    tags:
      - Downtown
      - Culture
    url: https://www.grandtheatre.com/events
    debug_url: grand.html
    home: https://www.grandtheatre.com/
    finders:
      main:
        css: div.shows
      events:
        css: article
      link:
        css: a
        attr: href
        methods: value
      title:
        css: div.cont span
        methods: text
      date:
        css: div.field-date
        methods: text
